# IoC, DI

**Inversion of Control(제어의 역전)**

- DI(의존성 주입)을 이해하기 위해서는 IoC의 개념을 알고 넘어가야한다. 스프링을 쓰기 전에는 개발자가 프로그램의 흐름을 제어하는 주체였다. 하지만 스프링에선 프로그램의 흐름을 프레임워크가 주도하게 된다. 객체의 생성 ~ 생명주기 관리를 컨테이너가 도맡아서 하게 된 것이다. 즉 제어권이 컨테이너로 넘어가게 되고, 이것을 제어권의 흐름이 바뀌었다고 하여 IoC(제어의 역전)이라고 한다. 제어권이 컨테이너로 넘어옴으로써 의존성 주입 등이 가능하게 된다.

**Dependency Injection(의존성 주입)**

객체간의 의존성을 자신이 아닌 외부에서 주입하는 개념이다. 3가지 타입으로 정의할 수 있다.

- 생성자를 통해 주입하는 방식
    
    인스턴스가 생성되었을 때 의존성이 존재하는 것이 보장되기 때문에 의존성의 존재여부가 보장된다. 스프링에서도 해당 방식을 권장하고있다.
    
- Setter 메소드를 이용하여 주입하는 방식
    
    해당방식은 생성자를 통한 주입방식 보다 좀 더 주의를 요한다. 주입 받는 의존성의 기본값을 정의할 수 있지 않다면 null값이 존재할 수 있는 이슈가 있기 때문이다. 의존성이 다시 주입되어야 할 경우 유용하게 사용되지만 대부분 생성자 주입 방식으로 해결 할 수 있다.
    
- 필드를 이용하여 주입하는 방식
    
    필드 주입방식은 읽기 쉽고, 사용하기 편하지만 final을 선언할 수 없고 별다른 장점이 없다.
    

선배가 말씀하시길, DI는 직접적으로 연결된 것이 아닌 주머니(?)에서 꺼내와 연결하는 것이라고 한다. 직접적으로 연결하면 많은 문제에 노출되기 때문에 이러하게 연결하는 것이라 한다. (물건을 다른사람과 직거래 하는것과 기업에 넘어온 물건을 우리가 구매하는 것의 차이이다. 직거래는 사기 확률이 높지만 기업을 통해 하는 거래는 사기 확률이 현저히 적은 것과 같다.)

**의존성**

의존성이 있다는 것은 클래스 간의 의존 관계가 있다는 것이고 의존 관계는 한 클래스가 바뀔 때 다른 클래스가 영향을 받는다는 것을 뜻한다.

- 이 의존성을 왜 외부에서 주입해주는지 생각해보자면 한 클래스의 코드가 변경되면 영향을 받는 즉 의존 관계에 있는 클래스도 변경을 해줘야 한다.
    - 그렇게 됐을 때 수정을 못한 코드가 조금이라도 있다면 바로 오류가 발생하고 코드의 품질과 안정성이 떨어지기 때문에 사용하는 것 같다.
- 그렇기 때문에 인터페이스를 사용하여 클래스간의 의존성을 없애는 것으로 보인다.

**주입**

주입은 클래스 외부에서 객체를 생성하여 해당 객체를 클래스 내부에 주입하는 것을 뜻한다.

- 외부에서 인스턴스를 만들어서 필요로 하는 클래스에 주입한다. 인스턴스를 저장하는 공간을 컨테이너라 부른다.
- 이제 객체에 대한 제어 권한이 클래스가 아닌 컨테이너에 있어서 이를 IOC(Inversion Of Control) 제어의 역전이라고 한다.
- 여기서 인스턴스를 저장하는 공간을 IOC 컨테이너라고 부른다.

**마무리**

의존성 주입과 제어의 역전의 개념만 알고 좀 막연하게 생각했었는데 알고보니 코드의 유지보수를 위해 사용하는 것이었다. 이렇게 의문점을 가지고 공부를 하니까 이해가 훨씬 잘 되는 것 같고 앞으로 저런 개념들을 생각하며 코드를 작성해야겠다.